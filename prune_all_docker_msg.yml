---
- hosts: all
  become: true

  tasks:
  
    - name: Prune everything
      community.docker.docker_prune:
        containers: true
        images: true
        networks: true
        volumes: true
      register: prune_result
        
    - name: Display the reclaimed space
      debug:
        msg: "Pruned {{ prune_result.containers_space_reclaimed | length }} containers, {{ prune_result.images_space_reclaimed | length }} images, {{ prune_result.networks | length }} networks, and {{ prune_result.volumes | length }} volumes."
